"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[816],{7816:(t,e,s)=>{s.r(e),s.d(e,{default:()=>v});var n,l,i,o,c,r,u,h,a,m=s(6599),d=s(4183),f=s.n(d);function p(t,e,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(t):n?n.value:e.get(t)}class v extends m.Qr{constructor(){super(...arguments),n.add(this)}connect(){this.tomSelect||(this.urlValue?this.tomSelect=p(this,n,"m",c).call(this,this.urlValue):this.optionsAsHtmlValue?this.tomSelect=p(this,n,"m",o).call(this):this.tomSelect=p(this,n,"m",i).call(this))}disconnect(){this.tomSelect.destroy()}get selectElement(){return this.element instanceof HTMLSelectElement?this.element:null}get formElement(){if(!(this.element instanceof HTMLInputElement||this.element instanceof HTMLSelectElement))throw new Error("Autocomplete Stimulus controller can only be used no an <input> or <select>.");return this.element}}n=new WeakSet,l=function(){const t={},e=!this.selectElement||this.selectElement.multiple;this.formElement.disabled||e||(t.clear_button={title:""}),e&&(t.remove_button={title:""}),this.urlValue&&(t.virtual_scroll={});const s={render:{no_results:()=>`<div class="no-results">${this.noResultsFoundTextValue}</div>`},plugins:t,onItemAdd:()=>{this.tomSelect.setTextboxValue("")},closeAfterSelect:!0};return this.selectElement||this.urlValue||(s.shouldLoad=()=>!1),p(this,n,"m",u).call(this,s,this.tomSelectOptionsValue)},i=function(){const t=p(this,n,"m",u).call(this,p(this,n,"m",l).call(this),{maxOptions:this.selectElement?this.selectElement.options.length:50});return p(this,n,"m",h).call(this,t)},o=function(){const t=p(this,n,"m",u).call(this,p(this,n,"m",l).call(this),{maxOptions:this.selectElement?this.selectElement.options.length:50,score:t=>{const e=this.tomSelect.getScoreFunction(t);return t=>e(Object.assign(Object.assign({},t),{text:p(this,n,"m",r).call(this,t.text)}))},render:{item:function(t){return`<div>${t.text}</div>`},option:function(t){return`<div>${t.text}</div>`}}});return p(this,n,"m",h).call(this,t)},c=function(t){const e=p(this,n,"m",u).call(this,p(this,n,"m",l).call(this),{firstUrl:e=>{const s=t.includes("?")?"&":"?";return`${t}${s}query=${encodeURIComponent(e)}`},load:function(t,e){const s=this.getUrl(t);fetch(s).then((t=>t.json())).then((s=>{this.setNextUrl(t,s.next_page),e(s.results)})).catch((()=>e()))},score:function(t){return function(t){return 1}},render:{option:function(t){return`<div>${t.text}</div>`},item:function(t){return`<div>${t.text}</div>`},no_more_results:()=>`<div class="no-more-results">${this.noMoreResultsTextValue}</div>`,no_results:()=>`<div class="no-results">${this.noResultsFoundTextValue}</div>`},preload:"focus"});return p(this,n,"m",h).call(this,e)},r=function(t){return t.replace(/(<([^>]+)>)/gi,"")},u=function(t,e){return Object.assign(Object.assign({},t),e)},h=function(t){p(this,n,"m",a).call(this,"autocomplete:pre-connect",{options:t});const e=new(f())(this.formElement,t);return p(this,n,"m",a).call(this,"autocomplete:connect",{tomSelect:e,options:t}),e},a=function(t,e){this.element.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0}))},v.values={url:String,optionsAsHtml:Boolean,noResultsFoundText:String,noMoreResultsText:String,tomSelectOptions:Object}}}]);